---
title: Learning Scala(3):传名参数
date: 2017-07-12 13:24:25
tags:
 - scala
 - 学习笔记
---

## 传名参数

  传名参数(By name Parameter)是除去函数值作为函数参数，函数类型参数的另一种形式。

  如果一个函数支持传入一个传名参数，那么调用者可以传入一个值，也可以传入最终返回一个值的函数。

  传名参数在函数内部被使用时，如果调用者传入的本身就是一个值，那么相当于就是使用传入的那个值，但如果调用者传入的是一个表达式或者一个最终返回一个值的函数，那么会先执行这个表达式或者这个函数得到一个值。

<!--more-->

  需要明确的一点是，你每次在函数内用传名参数它都会重新计算值，也就是把表达式全部都重新执行一遍，这是相当耗费计算量的，如果每次返回的是不同的值（比如取随机数）也许还有点用，但是重复进行相同的计算，得到同一个值完全不可取。

  对比普通的函数传参而言，普通的传参在函数调用之前，先回执行传入的表达式或函数，而不会等到函数中调用这个函数或表达式时再执行。对比如下:

```scala
/*
函数接受一个Int型的普通参数
*/
scala> def timer(f:Int):Int={ 
     | println("s");f+1
     | println("m");f+1
     | }
timer: (f: Int)Int

/*
首选执行表达式得到结果，再执行函数
*/
scala> timer({println("123");1})
123
s
m
res14: Int = 2



/*
函数接受一个传名参数f，该传名参数返回一个Int型
该函数中两次调用f
注意：传名参数f: =>Int,:和=>中间有空格，它和()=>Int的意义不同
f: =>Int代表Int传名参数类型
f:()=>Int一个代表无参的返回Int型的函数参数类型
*/
scala> def timer(f: =>Int):Int={ 
     | println("s");f+1
     | println("m");f+1
     | }
timer: (f: => Int)Int

/*
传入表达式f，每次调用输出123
可以看到f执行了两次
*/
scala> timer({println("123");1})
s
123
m
123
res13: Int = 2
```

